#sidebar TableOfContents

== Setup the project ==

First we need to setup a Seam project with a few components in there. You can either build it from scratch and add what we'll discuss in a few lines, or download  [http://code.google.com/p/dhev/downloads/detail?name=DHEV-Tutorial.rar&can=2&q= this archive] which contains an eclipse project ready to be imported. The project contains these main things:
  * User bean: this is the model representing the User. It's a usual pojo decorated with JPA annotations for the persistence, and of course an @Name since we'll use it as a Seam component. For now our user has only a couple of fields, username and age:
{{{
//com.dhev.model.User.java
@Name("user")
@Entity
@Table(name = "USER")
public class User implements Serializable {

	@Id
	private String userName;

	@Column
	private Integer age;

        //getters and setters...

}
}}}
  * UserManager class: contains a method to persist the user to the database. It simply calls persist on the entity manager, then return the "success" string (in the pages.xml file there will be a rule to manage that return):
{{{
//com.dhev.service.UserManagerImpl
@Name("userManager")
public class UserManagerImpl implements UserManager {

	@In(create = true)
	User user;

	@In
	protected EntityManager entityManager;

	public String registerUser() throws Exception {
		System.out.println("Registering user " + user.getUserName());

		entityManager.persist(user);

		return "success";
	}

}
}}}
  * register.xhtml: it's the main (and practically only) page of the application. It has a form where user's data can be entered, and a "Register" button which triggers the userManager's registerUser() method:
{{{
<!-- register.xhtml -->
<!-- ... -->
      <f:view>
         <h:form id="registration">
         	<s:validateAll>
         	<h:panelGrid columns="3">
	            Username: <h:inputText id="username" value="#{user.userName}" required="true"/> <h:message for="username" errorClass="errorMessage" />
	            Age: <h:inputText id="age" value="#{user.age}" required="true"/> <h:message for="age" errorClass="errorMessage" />
		    <h:commandButton id="register" action="#{userManager.registerUser}" value="Register" />
            </h:panelGrid>
            </s:validateAll>
         </h:form>         
      </f:view>
<!-- ... -->
}}}